---
import '../styles/global.css';
import type { SanityDocument } from "@sanity/client";
import { loadQuery } from "../util/load-query";
import PageBuilder from "../components/PageBuilder.astro";
import Layout from "../layouts/Layout.astro";

const HOME_PAGE_QUERY = `*[_id == "siteSettings"][0]{
    homePage->{
      ...,
      content[]{
        ...,
      }      
    }
  }`;

const { data: homePage } = await loadQuery<SanityDocument>({
  query: HOME_PAGE_QUERY,
  params: {},
});
---
<Layout>
  {homePage?.homePage?.content && <PageBuilder content={homePage.homePage.content} documentId={homePage.homePage._id} documentType={homePage.homePage._type} />}
</Layout>